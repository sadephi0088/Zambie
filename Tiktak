import telebot

bot = telebot.TeleBot("7583760165:AAHzGN-N7nyHgFoWt9oamd2tgO7pLkKFWFs")
admin_id = 7341748124  # Ø¢ÛŒØ¯ÛŒ Ø¹Ø¯Ø¯ÛŒ ØªÙˆ Ø¹Ø´Ù‚Ù…
main_group_id = None
welcome_enabled = {}

@bot.message_handler(commands=['set'])
def set_group(message):
    global main_group_id
    if message.from_user.id == admin_id:
        main_group_id = message.chat.id
        welcome_enabled[main_group_id] = True
        bot.reply_to(message, "âœ… Ø§ÛŒÙ† Ú¯Ø±ÙˆÙ‡ Ø¨Ù‡â€ŒØ¹Ù†ÙˆØ§Ù† Ú¯Ø±ÙˆÙ‡ Ø§ØµÙ„ÛŒ ØªÙ†Ø¸ÛŒÙ… Ø´Ø¯.")
    else:
        bot.reply_to(message, "ğŸš« ÙÙ‚Ø· ØµØ§Ø­Ø¨ Ø±Ø¨Ø§Øª Ù…ÛŒâ€ŒØªÙˆÙ†Ù‡ Ø§ÛŒÙ† Ø¯Ø³ØªÙˆØ± Ø±Ùˆ Ø¨Ø²Ù†Ù‡.")

@bot.message_handler(commands=['dset'])
def disable_and_leave(message):
    global main_group_id
    if message.from_user.id == admin_id and message.chat.id == main_group_id:
        welcome_enabled[main_group_id] = False
        bot.reply_to(message, "âŒ ÙØ¹Ø§Ù„ÛŒØª Ø±Ø¨Ø§Øª Ø¯Ø± Ø§ÛŒÙ† Ú¯Ø±ÙˆÙ‡ Ù…ØªÙˆÙ‚Ù Ø´Ø¯ Ùˆ Ø±Ø¨Ø§Øª Ø®Ø§Ø±Ø¬ Ù…ÛŒâ€ŒØ´ÙˆØ¯.")
        bot.leave_chat(main_group_id)
        main_group_id = None
    else:
        bot.reply_to(message, "ğŸš« ÙÙ‚Ø· ØµØ§Ø­Ø¨ Ø±Ø¨Ø§Øª Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø§ÛŒÙ† Ø¯Ø³ØªÙˆØ± Ø±Ø§ Ø¯Ø± Ú¯Ø±ÙˆÙ‡ Ø§ØµÙ„ÛŒ Ø§Ø¬Ø±Ø§ Ú©Ù†Ø¯.")

@bot.message_handler(commands=['wlc'])
def enable_wlc(message):
    if message.chat.id == main_group_id:
        welcome_enabled[main_group_id] = True
        bot.reply_to(message, "âœ… Ø®ÙˆØ´â€ŒØ¢Ù…Ø¯Ú¯ÙˆÛŒÛŒ ÙØ¹Ø§Ù„ Ø´Ø¯.")
    else:
        bot.leave_chat(message.chat.id)

@bot.message_handler(commands=['dwlc'])
def disable_wlc(message):
    if message.chat.id == main_group_id:
        welcome_enabled[main_group_id] = False
        bot.reply_to(message, "âŒ Ø®ÙˆØ´â€ŒØ¢Ù…Ø¯Ú¯ÙˆÛŒÛŒ ØºÛŒØ±ÙØ¹Ø§Ù„ Ø´Ø¯.")
    else:
        bot.leave_chat(message.chat.id)

@bot.message_handler(content_types=['new_chat_members'])
def welcome_new_member(message):
    if message.chat.id != main_group_id or not welcome_enabled.get(main_group_id, False):
        bot.leave_chat(message.chat.id)
        return

    for user in message.new_chat_members:
        full_name = f"{user.first_name or ''} {user.last_name or ''}".strip()
        user_id = user.id
        username = f"@{user.username}" if user.username else "Ù†Ø¯Ø§Ø±Ø¯ âŒ"

        welcome_text = f"""
â•”â•â”âŠ±ğŸŒŸ TikTak â€¢ Ù¾ÛŒØ§Ù… ÙˆØ±ÙˆØ¯ ğŸŒŸâŠ°â”â•â•—  
ğŸ‰ Ø®ÙˆØ´â€ŒØ¢Ù…Ø¯ÛŒ {full_name} Ø¹Ø²ÛŒØ²! ğŸ‰  

ğŸ†” Ø¢ÛŒØ¯ÛŒ: `{user_id}`  
ğŸ”— ÛŒÙˆØ²Ø±Ù†ÛŒÙ…: {username}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
ğŸ’– Ø­Ø§Ù„Ø§ Ø¯Ø± Ø¬Ù…Ø¹ÛŒ Ù‚Ø¯Ù… Ú¯Ø°Ø§Ø´ØªÛŒ Ú©Ù‡ Ù‡Ù…Ù‡ØŒ Ø§Ù†ØªØ®Ø§Ø¨â€ŒØ´Ø¯Ù‡â€ŒØ§Ù†...  
Ù†Ø´ÙˆÙ† Ø¨Ø¯Ù‡ Ú©Ù‡ Ø¬Ø§ÛŒ ØªÙˆ Ø§ÛŒÙ†Ø¬Ø§Ø³Øª â€” Ú©Ù†Ø§Ø± Ø®Ø§Øµâ€ŒØªØ±ÛŒÙ†â€ŒÙ‡Ø§ ğŸŒˆğŸ’¥  
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  

ğŸ“„ Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ø§Ø®ØªØµØ§ØµÛŒâ€ŒØª Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯!  
ğŸ­ Ù‚Ø¯Ø±Øªâ€ŒÙ‡Ø§ØªØŒ Ø§ÙØªØ®Ø§Ø±Ø§ØªØªØŒ Ø§Ù…ØªÛŒØ§Ø²Ø§ØªØª... Ù‡Ù…Ù‡ Ø§ÛŒÙ†Ø¬Ø§Ù†Ø³Øª!

ğŸ‘â€ğŸ—¨ Ø¨Ø±Ø§ÛŒ Ø¯ÛŒØ¯Ù†Ø´ØŒ ÙÙ‚Ø· ØªÙˆÛŒ Ú¯Ø±ÙˆÙ‡ Ø¨Ù†ÙˆÛŒØ³:  
/mee   ğŸ‘ˆ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  
ğŸŒŸ Ø¨Ø§ Ø¹Ø´Ù‚ØŒ ØªÛŒÙ… Ù…Ø¯ÛŒØ±ÛŒØª TikTak Master
"""
        bot.send_message(message.chat.id, welcome_text, reply_to_message_id=message.message_id, parse_mode="Markdown")

@bot.message_handler(func=lambda message: True)
def unknown_commands(message):
    if message.chat.id != main_group_id:
        bot.leave_chat(message.chat.id)

bot.infinity_polling()
